<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>ワールド暗号資産サテライト（仮） | 男メイドラボ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script defer src="https://use.fontawesome.com/releases/v5.0.8/js/fontawesome.js" integrity="sha384-7ox8Q2yzO/uWircfojVuCQOZl+ZZBg2D2J5nkpLqzH1HY0C1dHlTKIbpRz/LG23c"
        crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.8/js/regular.js" integrity="sha384-t7yHmUlwFrLxHXNLstawVRBMeSLcXTbQ5hsd0ifzwGtN7ZF7RZ8ppM7Ldinuoiif"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" media="screen" href="/common.css" />
    <style>
        main {
            font-size: 12px;
        }

        .cont {
            display: flex;
        }

        .wrap {
            flex-wrap: wrap;
        }

        .bar {
            height: 16px;
            width: 100px;
            border: 1px solid rgba(200, 200, 200, 0.8);
            display: flex;
            flex-direction: row-reverse;
        }

        .bar.reverse {
            flex-direction: row;
        }

        .bar .item {
            height: 100%;
            transition: all 0.5s;
        }

        .bar .item.volume {
            background-color: green;
        }

        .bar .item.sell {
            background-color: red;
        }

        .bar .item.buy {
            background-color: blue;
        }

        .bar #text {
            position: absolute;
        }
    </style>
</head>

<body>
    <main class="cont wrap">
        <div id="btc">
            <h2>BTC</h2>
            <div id="btcusd" style="margin: 12px;">
                <h3>BTC/USD</h3>
                <div id="bitmex" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>bitmex</div>
                    <div id="lastprice"></div>
                </div>
                <div id="mix" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>Mix BTC_USD</div>
                </div>
                <div id="bitfinex" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>bitfinex</div>
                    <div id="lastprice"></div>
                </div>
                <div id="gdax" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>GDAX</div>
                    <div id="lastprice"></div>
                </div>
                <div id="okcoin" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>OKCoin</div>
                    <div id="lastprice"></div>
                </div>
                <div id="bitstamp" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>Bitstamp</div>
                    <div id="lastprice"></div>
                </div>
            </div>

            <div id="btcusdt" style="margin: 12px;">
                <h3>BTC/USDT</h3>
                <div id="mix" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>Mix BTC_USDT</div>
                </div>
                <div id="binance" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>binance</div>
                    <div id="lastprice"></div>
                </div>
                <div id="okex" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>OKEx</div>
                    <div id="lastprice"></div>
                </div>
            </div>

            <div id="btcjpy" style="margin: 12px;">
                <h3>BTC/JPY</h3>
                <div id="bitflyerFX" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>bitflyerFX</div>
                    <div id="lastprice"></div>
                </div>
                <div id="mix" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>Mix BTC_JPY</div>
                </div>
                <div id="bitflyer" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>bitflyer</div>
                    <div id="lastprice"></div>
                </div>
                <div id="zaif" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>Zaif</div>
                    <div id="lastprice"></div>
                </div>
                <div id="bitbank" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>bitbank</div>
                    <div id="lastprice"></div>
                </div>
                <div id="coincheck" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>coincheck</div>
                    <div id="lastprice"></div>
                </div>
            </div>
        </div>

        <div id="usd">
            <h2>USD</h2>
            <div id="usdbtc" style="margin: 12px;">
                <h3>USD/BTC</h3>
                <div id="bitmex" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>bitmex</div>
                    <div id="lastprice"></div>
                </div>
                <div id="mix" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>Mix USD_BTC</div>
                </div>
                <div id="bitfinex" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>bitfinex</div>
                    <div id="lastprice"></div>
                </div>
                <div id="gdax" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>GDAX</div>
                    <div id="lastprice"></div>
                </div>
                <div id="okcoin" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>OKCoin</div>
                    <div id="lastprice"></div>
                </div>
                <div id="bitstamp" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>Bitstamp</div>
                    <div id="lastprice"></div>
                </div>
            </div>
        </div>

        <div id="jpy">
            <h2>JPY</h2>
            <div id="jpybtc" style="margin: 12px;">
                <h3>JPY/BTC</h3>
                <div id="bitflyerFX" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>bitflyerFX</div>
                    <div id="lastprice"></div>
                </div>
                <div id="mix" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>Mix JPY_BTC</div>
                </div>
                <div id="bitflyer" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>bitflyer</div>
                    <div id="lastprice"></div>
                </div>
                <div id="zaif" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>Zaif</div>
                    <div id="lastprice"></div>
                </div>
                <div id="bitbank" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>bitbank</div>
                    <div id="lastprice"></div>
                </div>
                <div id="coincheck" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>coincheck</div>
                    <div id="lastprice"></div>
                </div>
            </div>
        </div>

        <div id="eth">
            <h2>ETH</h2>
            <div id="ethusd" style="margin: 12px;">
                <h3>ETH/USD</h3>
                <div id="mix" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>Mix ETH_USD</div>
                </div>
                <div id="bitfinex" class="cont">
                    <div id="buy-volume" class="bar">
                        <div id="item" class="item buy"></div>
                        <div id="text"></div>
                    </div>
                    <div id="sell-volume" class="bar reverse">
                        <div id="item" class="item sell"></div>
                        <div id="text"></div>
                    </div>
                    <div>bitfinex</div>
                    <div id="lastprice"></div>
                </div>
            </div>
        </div>

    </main>
    <footer class="footer">
        <a href="https://danmaid.com/">
            <i class="far fa-copyright mark"></i>2018 男メイド</a>
    </footer>

    <script src="https://js.pusher.com/4.2/pusher.min.js"></script>
    <script src="https://cdn.pubnub.com/sdk/javascript/pubnub.4.20.2.js"></script>
    <script type="module">
        import * as exec from './modules/src/executions2.js'

        const side = {
            SELL: 'SELL',
            BUY: 'BUY'
        }

        class Pair {
            constructor() {
                this.exec = []
                setInterval(() => {
                    // 10秒前
                    let secago = new Date()
                    secago.setSeconds(secago.getSeconds() - 10)

                    // 10秒前以前のデータをパージ
                    this.exec = this.exec.filter(e => e.date > secago)
                }, 1000)
            }
            push(exec) {
                this.exec.push(exec)
            }
            getVolume() {
                let arr = this.exec
                return arr.length > 0 ? arr.map(exec => exec.volume).reduce((x, y) => x + y) : 0
            }
            getSellVolume() {
                let arr = this.exec.filter(exec => exec.side == side.SELL)
                return arr.length > 0 ? arr.map(exec => exec.volume).reduce((x, y) => x + y) : 0
            }
            getBuyVolume() {
                let arr = this.exec.filter(exec => exec.side == side.BUY)
                return arr.length > 0 ? arr.map(exec => exec.volume).reduce((x, y) => x + y) : 0
            }
        }

        // BTC_USD
        let btcusd = new Pair()
        let btcusdTag = document.querySelector('#btcusd')
        let bitfinexLtp = btcusdTag.querySelector('#bitfinex #lastprice')
        let bitfinexBtcUsd = new Pair()
        exec.bitfinex_BTC_USD.addEventListener('message', (e) => {
            btcusd.push(e.detail)
            bitfinexLtp.textContent = e.detail.price
            bitfinexBtcUsd.push(e.detail)
        })
        let bitmexLtp = btcusdTag.querySelector('#bitmex #lastprice')
        let bitmexBtcUsd = new Pair()
        exec.bitmex_BTC_USD.addEventListener('message', (e) => {
            // btcusd.push(e.detail)
            bitmexLtp.textContent = e.detail.price
            bitmexBtcUsd.push(e.detail)
        })
        let gdaxLtp = btcusdTag.querySelector('#gdax #lastprice')
        let gdaxBtcUsd = new Pair()
        exec.gdax_BTC_USD.addEventListener('message', (e) => {
            btcusd.push(e.detail)
            gdaxLtp.textContent = e.detail.price
            gdaxBtcUsd.push(e.detail)
        })
        let okcoinLtp = btcusdTag.querySelector('#okcoin #lastprice')
        let okcoinBtcUsd = new Pair()
        exec.okcoin_BTC_USD.addEventListener('message', (e) => {
            btcusd.push(e.detail)
            okcoinLtp.textContent = e.detail.price
            okcoinBtcUsd.push(e.detail)
        })
        let bitstampLtp = btcusdTag.querySelector('#bitstamp #lastprice')
        let bitstampBtcUsd = new Pair()
        exec.bitstamp_BTC_USD.addEventListener('message', (e) => {
            btcusd.push(e.detail)
            bitstampLtp.textContent = e.detail.price
            bitstampBtcUsd.push(e.detail)
        })

        // USD_BTC
        let usdbtc = new Pair()
        let usdbtcTag = document.querySelector('#usdbtc')
        let usdbtcBitfinexLtp = usdbtcTag.querySelector('#bitfinex #lastprice')
        let usdbtcBitfinex = new Pair()
        exec.bitfinex_BTC_USD.addEventListener('message', (e) => {
            let rev = JSON.parse(JSON.stringify(e.detail))
            rev.volume = e.detail.volume * e.detail.price
            rev.date = new Date(rev.date)
            rev.side = rev.side == side.SELL ? side.BUY : side.SELL
            usdbtc.push(rev)
            usdbtcBitfinexLtp.textContent = rev.price
            usdbtcBitfinex.push(rev)
        })
        let usdbtcBitmexLtp = usdbtcTag.querySelector('#bitmex #lastprice')
        let usdbtcBitmex = new Pair()
        exec.bitmex_BTC_USD.addEventListener('message', (e) => {
            let rev = JSON.parse(JSON.stringify(e.detail))
            rev.volume = e.detail.volume * e.detail.price
            rev.date = new Date(rev.date)
            rev.side = rev.side == side.SELL ? side.BUY : side.SELL
            usdbtcBitmexLtp.textContent = rev.price
            usdbtcBitmex.push(rev)
        })
        let usdbtcGdaxLtp = usdbtcTag.querySelector('#gdax #lastprice')
        let usdbtcGdax = new Pair()
        exec.gdax_BTC_USD.addEventListener('message', (e) => {
            let rev = JSON.parse(JSON.stringify(e.detail))
            rev.volume = e.detail.volume * e.detail.price
            rev.date = new Date(rev.date)
            rev.side = rev.side == side.SELL ? side.BUY : side.SELL
            usdbtc.push(rev)
            usdbtcGdaxLtp.textContent = rev.price
            usdbtcGdax.push(rev)
        })
        let usdbtcOkcoinLtp = usdbtcTag.querySelector('#okcoin #lastprice')
        let usdbtcOkcoin = new Pair()
        exec.okcoin_BTC_USD.addEventListener('message', (e) => {
            let rev = JSON.parse(JSON.stringify(e.detail))
            rev.volume = e.detail.volume * e.detail.price
            rev.date = new Date(rev.date)
            rev.side = rev.side == side.SELL ? side.BUY : side.SELL
            usdbtc.push(rev)
            usdbtcOkcoinLtp.textContent = rev.price
            usdbtcOkcoin.push(rev)
        })
        let usdbtcBitstampLtp = usdbtcTag.querySelector('#bitstamp #lastprice')
        let usdbtcBitstamp = new Pair()
        exec.bitstamp_BTC_USD.addEventListener('message', (e) => {
            let rev = JSON.parse(JSON.stringify(e.detail))
            rev.volume = e.detail.volume * e.detail.price
            rev.date = new Date(rev.date)
            rev.side = rev.side == side.SELL ? side.BUY : side.SELL
            usdbtc.push(rev)
            usdbtcBitstampLtp.textContent = rev.price
            usdbtcBitstamp.push(rev)
        })

        // BTC_USDT
        let btcusdt = new Pair()
        let btcusdtTag = document.querySelector('#btcusdt')
        let binanceLtp = btcusdtTag.querySelector('#binance #lastprice')
        let binanceBtcUsdt = new Pair()
        exec.binance_BTC_USDT.addEventListener('message', (e) => {
            btcusdt.push(e.detail)
            binanceLtp.textContent = e.detail.price
            binanceBtcUsdt.push(e.detail)
        })
        let okexLtp = btcusdtTag.querySelector('#okex #lastprice')
        let okexBtcUsdt = new Pair()
        exec.okex_BTC_USDT.addEventListener('message', (e) => {
            btcusdt.push(e.detail)
            okexLtp.textContent = e.detail.price
            okexBtcUsdt.push(e.detail)
        })

        // BTC_JPY
        let btcjpy = new Pair()
        let btcjpyTag = document.querySelector('#btcjpy')
        let bitflyerLtp = btcjpyTag.querySelector('#bitflyer #lastprice')
        let bitflyerBtcJpy = new Pair()
        exec.bitflyer_BTC_JPY.addEventListener('message', (e) => {
            btcjpy.push(e.detail)
            bitflyerLtp.textContent = e.detail.price
            bitflyerBtcJpy.push(e.detail)
        })
        let bitflyerFXLtp = btcjpyTag.querySelector('#bitflyerFX #lastprice')
        let bitflyerFXBtcJpy = new Pair()
        exec.bitflyer_FX_BTC_JPY.addEventListener('message', (e) => {
            // btcjpy.push(e.detail)
            bitflyerFXLtp.textContent = e.detail.price
            bitflyerFXBtcJpy.push(e.detail)
        })
        let zaifLtp = btcjpyTag.querySelector('#zaif #lastprice')
        let zaifBtcJpy = new Pair()
        exec.zaif_BTC_JPY.addEventListener('message', (e) => {
            btcjpy.push(e.detail)
            zaifLtp.textContent = e.detail.price
            zaifBtcJpy.push(e.detail)
        })
        let bitbankLtp = btcjpyTag.querySelector('#bitbank #lastprice')
        let bitbankBtcJpy = new Pair()
        exec.bitbank_BTC_JPY.addEventListener('message', (e) => {
            btcjpy.push(e.detail)
            bitbankLtp.textContent = e.detail.price
            bitbankBtcJpy.push(e.detail)
        })
        let coincheckLtp = btcjpyTag.querySelector('#coincheck #lastprice')
        let coincheckBtcJpy = new Pair()
        exec.coincheck_BTC_JPY.addEventListener('message', (e) => {
            btcjpy.push(e.detail)
            coincheckLtp.textContent = e.detail.price
            coincheckBtcJpy.push(e.detail)
        })

        // JPY_BTC
        let jpybtc = new Pair()
        let jpybtcTag = document.querySelector('#jpybtc')
        let jpybtcBitflyerLtp = jpybtcTag.querySelector('#bitflyer #lastprice')
        let jpybtcBitflyer = new Pair()
        exec.bitflyer_BTC_JPY.addEventListener('message', (e) => {
            let rev = JSON.parse(JSON.stringify(e.detail))
            rev.volume = e.detail.volume * e.detail.price
            rev.date = new Date(rev.date)
            rev.side = rev.side == side.SELL ? side.BUY : side.SELL
            jpybtc.push(rev)
            jpybtcBitflyerLtp.textContent = rev.price
            jpybtcBitflyer.push(rev)
        })
        let jpybtcBitflyerFXLtp = jpybtcTag.querySelector('#bitflyerFX #lastprice')
        let jpybtcBitflyerFX = new Pair()
        exec.bitflyer_FX_BTC_JPY.addEventListener('message', (e) => {
            let rev = JSON.parse(JSON.stringify(e.detail))
            rev.volume = e.detail.volume * e.detail.price
            rev.date = new Date(rev.date)
            rev.side = rev.side == side.SELL ? side.BUY : side.SELL
            // jpybtc.push(rev)
            jpybtcBitflyerFXLtp.textContent = rev.price
            jpybtcBitflyerFX.push(rev)
        })
        let jpybtcZaifLtp = jpybtcTag.querySelector('#zaif #lastprice')
        let jpybtcZaif = new Pair()
        exec.zaif_BTC_JPY.addEventListener('message', (e) => {
            let rev = JSON.parse(JSON.stringify(e.detail))
            rev.volume = e.detail.volume * e.detail.price
            rev.date = new Date(rev.date)
            rev.side = rev.side == side.SELL ? side.BUY : side.SELL
            jpybtc.push(rev)
            jpybtcZaifLtp.textContent = rev.price
            jpybtcZaif.push(rev)
        })
        let jpybtcBitbankLtp = jpybtcTag.querySelector('#bitbank #lastprice')
        let jpybtcBitbank = new Pair()
        exec.bitbank_BTC_JPY.addEventListener('message', (e) => {
            let rev = JSON.parse(JSON.stringify(e.detail))
            rev.volume = e.detail.volume * e.detail.price
            rev.date = new Date(rev.date)
            rev.side = rev.side == side.SELL ? side.BUY : side.SELL
            jpybtc.push(rev)
            jpybtcBitbankLtp.textContent = rev.price
            jpybtcBitbank.push(rev)
        })
        let jpybtcCoincheckLtp = jpybtcTag.querySelector('#coincheck #lastprice')
        let jpybtcCoincheck = new Pair()
        exec.coincheck_BTC_JPY.addEventListener('message', (e) => {
            let rev = JSON.parse(JSON.stringify(e.detail))
            rev.volume = e.detail.volume * e.detail.price
            rev.date = new Date(rev.date)
            rev.side = rev.side == side.SELL ? side.BUY : side.SELL
            jpybtc.push(rev)
            jpybtcCoincheckLtp.textContent = rev.price
            jpybtcCoincheck.push(rev)
        })

        // ETH_USD
        let ethusd = new Pair()
        let ethusdTag = document.querySelector('#ethusd')
        let bitfinexEthUsdLtp = ethusdTag.querySelector('#bitfinex #lastprice')
        let bitfinexEthUsd = new Pair()
        exec.bitfinex_ETH_USD.addEventListener('message', (e) => {
            ethusd.push(e.detail)
            bitfinexEthUsdLtp.textContent = e.detail.price
            bitfinexEthUsd.push(e.detail)
        })

        // BTC_USD
        let target = btcusdTag.querySelector('#mix')
        let btcusdmix = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }
        target = btcusdTag.querySelector('#bitfinex')
        let bitfinex = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }
        target = btcusdTag.querySelector('#bitmex')
        let bitmex = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }
        target = btcusdTag.querySelector('#gdax')
        let gdax = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }
        target = btcusdTag.querySelector('#okcoin')
        let okcoin = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }
        target = btcusdTag.querySelector('#bitstamp')
        let bitstamp = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }

        // USD_BTC
        target = usdbtcTag.querySelector('#mix')
        let usdbtcMixTag = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }
        target = usdbtcTag.querySelector('#bitfinex')
        let usdbtcBitfinexTag = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }
        target = usdbtcTag.querySelector('#bitmex')
        let usdbtcBitmexTag = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }
        target = usdbtcTag.querySelector('#gdax')
        let usdbtcGdaxTag = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }
        target = usdbtcTag.querySelector('#okcoin')
        let usdbtcOkcoinTag = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }
        target = usdbtcTag.querySelector('#bitstamp')
        let usdbtcBitstampTag = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }

        // BTC_USDT
        target = btcusdtTag.querySelector('#mix')
        let btcusdtmix = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }
        target = btcusdtTag.querySelector('#binance')
        let binance = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }
        target = btcusdtTag.querySelector('#okex')
        let okex = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }

        // BTC_JPY
        target = btcjpyTag.querySelector('#mix')
        let btcjpymix = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }
        target = btcjpyTag.querySelector('#bitflyer')
        let bitflyer = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }
        target = btcjpyTag.querySelector('#bitflyerFX')
        let bitflyerFX = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }
        target = btcjpyTag.querySelector('#zaif')
        let zaif = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }
        target = btcjpyTag.querySelector('#bitbank')
        let bitbank = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }
        target = btcjpyTag.querySelector('#coincheck')
        let coincheck = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }

        // JPY_BTC
        target = jpybtcTag.querySelector('#mix')
        let jpybtcMixTag = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }
        target = jpybtcTag.querySelector('#bitflyer')
        let jpybtcBitflyerTag = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }
        target = jpybtcTag.querySelector('#bitflyerFX')
        let jpybtcBitflyerFXTag = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }
        target = jpybtcTag.querySelector('#zaif')
        let jpybtcZaifTag = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }
        target = jpybtcTag.querySelector('#bitbank')
        let jpybtcBitbankTag = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }
        target = jpybtcTag.querySelector('#coincheck')
        let jpybtcCoincheckTag = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }

        // ETH_USD
        target = ethusdTag.querySelector('#mix')
        let ethusdmix = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }
        target = ethusdTag.querySelector('#bitfinex')
        let ethusdbitfinex = {
            sellVolume: target.querySelector('#sell-volume #item'),
            buyVolume: target.querySelector('#buy-volume #item'),
            sellText: target.querySelector('#sell-volume #text'),
            buyText: target.querySelector('#buy-volume #text')
        }
        setInterval(() => {
            // BTC_USD
            btcusdmix.sellVolume.style.width = btcusd.getSellVolume() + '%'
            btcusdmix.buyVolume.style.width = btcusd.getBuyVolume() + '%'
            btcusdmix.sellText.textContent = Math.round(btcusd.getSellVolume() * 10000) / 10000
            btcusdmix.buyText.textContent = Math.round(btcusd.getBuyVolume() * 10000) / 10000

            bitfinex.sellVolume.style.width = bitfinexBtcUsd.getSellVolume() + '%'
            bitfinex.buyVolume.style.width = bitfinexBtcUsd.getBuyVolume() + '%'
            bitfinex.sellText.textContent = Math.round(bitfinexBtcUsd.getSellVolume() * 10000) / 10000
            bitfinex.buyText.textContent = Math.round(bitfinexBtcUsd.getBuyVolume() * 10000) / 10000

            bitmex.sellVolume.style.width = bitmexBtcUsd.getSellVolume() + '%'
            bitmex.buyVolume.style.width = bitmexBtcUsd.getBuyVolume() + '%'
            bitmex.sellText.textContent = Math.round(bitmexBtcUsd.getSellVolume() * 10000) / 10000
            bitmex.buyText.textContent = Math.round(bitmexBtcUsd.getBuyVolume() * 10000) / 10000

            gdax.sellVolume.style.width = gdaxBtcUsd.getSellVolume() + '%'
            gdax.buyVolume.style.width = gdaxBtcUsd.getBuyVolume() + '%'
            gdax.sellText.textContent = Math.round(gdaxBtcUsd.getSellVolume() * 10000) / 10000
            gdax.buyText.textContent = Math.round(gdaxBtcUsd.getBuyVolume() * 10000) / 10000

            okcoin.sellVolume.style.width = okcoinBtcUsd.getSellVolume() + '%'
            okcoin.buyVolume.style.width = okcoinBtcUsd.getBuyVolume() + '%'
            okcoin.sellText.textContent = Math.round(okcoinBtcUsd.getSellVolume() * 10000) / 10000
            okcoin.buyText.textContent = Math.round(okcoinBtcUsd.getBuyVolume() * 10000) / 10000

            bitstamp.sellVolume.style.width = bitstampBtcUsd.getSellVolume() + '%'
            bitstamp.buyVolume.style.width = bitstampBtcUsd.getBuyVolume() + '%'
            bitstamp.sellText.textContent = Math.round(bitstampBtcUsd.getSellVolume() * 10000) / 10000
            bitstamp.buyText.textContent = Math.round(bitstampBtcUsd.getBuyVolume() * 10000) / 10000

            // USD_BTC
            usdbtcMixTag.sellVolume.style.width = usdbtc.getSellVolume() / 10000 + '%'
            usdbtcMixTag.buyVolume.style.width = usdbtc.getBuyVolume() / 10000 + '%'
            usdbtcMixTag.sellText.textContent = Math.round(usdbtc.getSellVolume() * 100) / 100
            usdbtcMixTag.buyText.textContent = Math.round(usdbtc.getBuyVolume() * 100) / 100

            usdbtcBitfinexTag.sellVolume.style.width = usdbtcBitfinex.getSellVolume() / 10000 + '%'
            usdbtcBitfinexTag.buyVolume.style.width = usdbtcBitfinex.getBuyVolume() / 10000 + '%'
            usdbtcBitfinexTag.sellText.textContent = Math.round(usdbtcBitfinex.getSellVolume() * 100) / 100
            usdbtcBitfinexTag.buyText.textContent = Math.round(usdbtcBitfinex.getBuyVolume() * 100) / 100

            usdbtcBitmexTag.sellVolume.style.width = usdbtcBitmex.getSellVolume() / 10000 + '%'
            usdbtcBitmexTag.buyVolume.style.width = usdbtcBitmex.getBuyVolume() / 10000 + '%'
            usdbtcBitmexTag.sellText.textContent = Math.round(usdbtcBitmex.getSellVolume() * 100) / 100
            usdbtcBitmexTag.buyText.textContent = Math.round(usdbtcBitmex.getBuyVolume() * 100) / 100

            usdbtcGdaxTag.sellVolume.style.width = usdbtcGdax.getSellVolume() / 10000 + '%'
            usdbtcGdaxTag.buyVolume.style.width = usdbtcGdax.getBuyVolume() / 10000 + '%'
            usdbtcGdaxTag.sellText.textContent = Math.round(usdbtcGdax.getSellVolume() * 100) / 100
            usdbtcGdaxTag.buyText.textContent = Math.round(usdbtcGdax.getBuyVolume() * 100) / 100

            usdbtcOkcoinTag.sellVolume.style.width = usdbtcOkcoin.getSellVolume() / 10000 + '%'
            usdbtcOkcoinTag.buyVolume.style.width = usdbtcOkcoin.getBuyVolume() / 10000 + '%'
            usdbtcOkcoinTag.sellText.textContent = Math.round(usdbtcOkcoin.getSellVolume() * 100) / 100
            usdbtcOkcoinTag.buyText.textContent = Math.round(usdbtcOkcoin.getBuyVolume() * 100) / 100

            usdbtcBitstampTag.sellVolume.style.width = usdbtcBitstamp.getSellVolume() / 10000 + '%'
            usdbtcBitstampTag.buyVolume.style.width = usdbtcBitstamp.getBuyVolume() / 10000 + '%'
            usdbtcBitstampTag.sellText.textContent = Math.round(usdbtcBitstamp.getSellVolume() * 100) / 100
            usdbtcBitstampTag.buyText.textContent = Math.round(usdbtcBitstamp.getBuyVolume() * 100) / 100

            // BTC_USDT
            btcusdtmix.sellVolume.style.width = btcusdt.getSellVolume() + '%'
            btcusdtmix.buyVolume.style.width = btcusdt.getBuyVolume() + '%'
            btcusdtmix.sellText.textContent = Math.round(btcusdt.getSellVolume() * 10000) / 10000
            btcusdtmix.buyText.textContent = Math.round(btcusdt.getBuyVolume() * 10000) / 10000

            binance.sellVolume.style.width = binanceBtcUsdt.getSellVolume() + '%'
            binance.buyVolume.style.width = binanceBtcUsdt.getBuyVolume() + '%'
            binance.sellText.textContent = Math.round(binanceBtcUsdt.getSellVolume() * 10000) / 10000
            binance.buyText.textContent = Math.round(binanceBtcUsdt.getBuyVolume() * 10000) / 10000

            okex.sellVolume.style.width = okexBtcUsdt.getSellVolume() + '%'
            okex.buyVolume.style.width = okexBtcUsdt.getBuyVolume() + '%'
            okex.sellText.textContent = Math.round(okexBtcUsdt.getSellVolume() * 10000) / 10000
            okex.buyText.textContent = Math.round(okexBtcUsdt.getBuyVolume() * 10000) / 10000

            // BTC_JPY
            btcjpymix.sellVolume.style.width = btcjpy.getSellVolume() + '%'
            btcjpymix.buyVolume.style.width = btcjpy.getBuyVolume() + '%'
            btcjpymix.sellText.textContent = Math.round(btcjpy.getSellVolume() * 10000) / 10000
            btcjpymix.buyText.textContent = Math.round(btcjpy.getBuyVolume() * 10000) / 10000

            bitflyer.sellVolume.style.width = bitflyerBtcJpy.getSellVolume() + '%'
            bitflyer.buyVolume.style.width = bitflyerBtcJpy.getBuyVolume() + '%'
            bitflyer.sellText.textContent = Math.round(bitflyerBtcJpy.getSellVolume() * 10000) / 10000
            bitflyer.buyText.textContent = Math.round(bitflyerBtcJpy.getBuyVolume() * 10000) / 10000

            bitflyerFX.sellVolume.style.width = bitflyerFXBtcJpy.getSellVolume() + '%'
            bitflyerFX.buyVolume.style.width = bitflyerFXBtcJpy.getBuyVolume() + '%'
            bitflyerFX.sellText.textContent = Math.round(bitflyerFXBtcJpy.getSellVolume() * 10000) / 10000
            bitflyerFX.buyText.textContent = Math.round(bitflyerFXBtcJpy.getBuyVolume() * 10000) / 10000

            zaif.sellVolume.style.width = zaifBtcJpy.getSellVolume() + '%'
            zaif.buyVolume.style.width = zaifBtcJpy.getBuyVolume() + '%'
            zaif.sellText.textContent = Math.round(zaifBtcJpy.getSellVolume() * 10000) / 10000
            zaif.buyText.textContent = Math.round(zaifBtcJpy.getBuyVolume() * 10000) / 10000

            bitbank.sellVolume.style.width = bitbankBtcJpy.getSellVolume() + '%'
            bitbank.buyVolume.style.width = bitbankBtcJpy.getBuyVolume() + '%'
            bitbank.sellText.textContent = Math.round(bitbankBtcJpy.getSellVolume() * 10000) / 10000
            bitbank.buyText.textContent = Math.round(bitbankBtcJpy.getBuyVolume() * 10000) / 10000

            coincheck.sellVolume.style.width = coincheckBtcJpy.getSellVolume() + '%'
            coincheck.buyVolume.style.width = coincheckBtcJpy.getBuyVolume() + '%'
            coincheck.sellText.textContent = Math.round(coincheckBtcJpy.getSellVolume() * 10000) / 10000
            coincheck.buyText.textContent = Math.round(coincheckBtcJpy.getBuyVolume() * 10000) / 10000

            // JPY_BTC
            jpybtcMixTag.sellVolume.style.width = jpybtc.getSellVolume() / 1000000 + '%'
            jpybtcMixTag.buyVolume.style.width = jpybtc.getBuyVolume() / 1000000 + '%'
            jpybtcMixTag.sellText.textContent = Math.round(jpybtc.getSellVolume())
            jpybtcMixTag.buyText.textContent = Math.round(jpybtc.getBuyVolume())

            jpybtcBitflyerTag.sellVolume.style.width = jpybtcBitflyer.getSellVolume() / 1000000 + '%'
            jpybtcBitflyerTag.buyVolume.style.width = jpybtcBitflyer.getBuyVolume() / 1000000 + '%'
            jpybtcBitflyerTag.sellText.textContent = Math.round(jpybtcBitflyer.getSellVolume())
            jpybtcBitflyerTag.buyText.textContent = Math.round(jpybtcBitflyer.getBuyVolume())

            jpybtcBitflyerFXTag.sellVolume.style.width = jpybtcBitflyerFX.getSellVolume() / 1000000 + '%'
            jpybtcBitflyerFXTag.buyVolume.style.width = jpybtcBitflyerFX.getBuyVolume() / 1000000 + '%'
            jpybtcBitflyerFXTag.sellText.textContent = Math.round(jpybtcBitflyerFX.getSellVolume())
            jpybtcBitflyerFXTag.buyText.textContent = Math.round(jpybtcBitflyerFX.getBuyVolume())

            jpybtcZaifTag.sellVolume.style.width = jpybtcZaif.getSellVolume() / 1000000 + '%'
            jpybtcZaifTag.buyVolume.style.width = jpybtcZaif.getBuyVolume() / 1000000 + '%'
            jpybtcZaifTag.sellText.textContent = Math.round(jpybtcZaif.getSellVolume())
            jpybtcZaifTag.buyText.textContent = Math.round(jpybtcZaif.getBuyVolume())

            jpybtcBitbankTag.sellVolume.style.width = jpybtcBitbank.getSellVolume() / 1000000 + '%'
            jpybtcBitbankTag.buyVolume.style.width = jpybtcBitbank.getBuyVolume() / 1000000 + '%'
            jpybtcBitbankTag.sellText.textContent = Math.round(jpybtcBitbank.getSellVolume())
            jpybtcBitbankTag.buyText.textContent = Math.round(jpybtcBitbank.getBuyVolume())

            jpybtcCoincheckTag.sellVolume.style.width = jpybtcCoincheck.getSellVolume() / 1000000 + '%'
            jpybtcCoincheckTag.buyVolume.style.width = jpybtcCoincheck.getBuyVolume() / 1000000 + '%'
            jpybtcCoincheckTag.sellText.textContent = Math.round(jpybtcCoincheck.getSellVolume())
            jpybtcCoincheckTag.buyText.textContent = Math.round(jpybtcCoincheck.getBuyVolume())

            // ETH_USD
            ethusdmix.sellVolume.style.width = ethusd.getSellVolume() + '%'
            ethusdmix.buyVolume.style.width = ethusd.getBuyVolume() + '%'
            ethusdmix.sellText.textContent = ethusd.getSellVolume()
            ethusdmix.buyText.textContent = ethusd.getBuyVolume()

            ethusdbitfinex.sellVolume.style.width = bitfinexEthUsd.getSellVolume() + '%'
            ethusdbitfinex.buyVolume.style.width = bitfinexEthUsd.getBuyVolume() + '%'
            ethusdbitfinex.sellText.textContent = bitfinexEthUsd.getSellVolume()
            ethusdbitfinex.buyText.textContent = bitfinexEthUsd.getBuyVolume()
        }, 1000)
    </script>
</body>

</html>